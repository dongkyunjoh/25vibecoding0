import streamlit as st
import datetime
import random

# 1. ìš´ë™ ë°ì´í„° ì •ì˜ (ì¥ì†Œ + ë‚œì´ë„ë³„)
exercises = {
    "ë§¨ëª¸ ìš´ë™": {
        "ì´ˆê¸‰": [
            "í‘¸ì‰¬ì—…", "ìŠ¤ì¿¼íŠ¸", "í¬ëŸ°ì¹˜", "ì›Œí‚¹ ëŸ°ì§€", "ì í•‘ì­"
        ],
        "ì¤‘ê¸‰": [
            "í”Œë­í¬", "ë§ˆìš´í‹´ í´ë¼ì´ë¨¸", "ë²„í”¼ í…ŒìŠ¤íŠ¸", "ì í”„ ìŠ¤ì¿¼íŠ¸", "íŒŒì´í¬ í‘¸ì‰¬ì—…"
        ],
        "ê³ ê¸‰": [
            "í•¸ë“œìŠ¤íƒ ë“œ í‘¸ì‰¬ì—…", "í”Œë¡œìš° ë²„í”¼", "í”Œë­í¬ íˆ¬ í‘¸ì‰¬ì—…", "ì í”„ ëŸ°ì§€", "ìŠ¤íŒŒì´ë” í”Œë­í¬"
        ]
    },
    "í—¬ìŠ¤ì¥ ìš´ë™": {
        "ì´ˆê¸‰": [
            "ë ˆê·¸ í”„ë ˆìŠ¤", "ë«í’€ë‹¤ìš´", "ì²´ìŠ¤íŠ¸ í”„ë ˆìŠ¤", "ë°”ì´ì…‰ ì»¬ (ë¨¸ì‹ )", "ì‹œí‹°ë“œ ë ˆê·¸ ì»¬"
        ],
        "ì¤‘ê¸‰": [
            "ë²¤ì¹˜í”„ë ˆìŠ¤", "ìŠ¤ì¿¼íŠ¸ (ë°”ë²¨)", "ì‹œí‹°ë“œ ë¡œìš°", "ìˆ„ë” í”„ë ˆìŠ¤", "ì‚¬ì´í´ ë¨¸ì‹ "
        ],
        "ê³ ê¸‰": [
            "ë°ë“œë¦¬í”„íŠ¸", "í´ë¦° ì•¤ ì €í¬", "ë°”ë²¨ ìŠ¤ì¿¼íŠ¸", "ë¤ë²¨ ìŠ¤ë‚´ì¹˜", "ì¼€ì´ë¸” í¬ë¡œìŠ¤ì˜¤ë²„"
        ]
    }
}

# 2. ì„¸íŠ¸/íšŸìˆ˜ ì¶”ì²œ í•¨ìˆ˜
def get_sets_reps(level, name):
    if level == "ì´ˆê¸‰":
        sets = random.randint(2, 3)
        reps = random.choice(["10~12íšŒ", "15íšŒ", "ì‹œê°„ ê¸°ì¤€ 30ì´ˆ"])
    elif level == "ì¤‘ê¸‰":
        sets = random.randint(3, 4)
        reps = random.choice(["12~15íšŒ", "20íšŒ", "ì‹œê°„ ê¸°ì¤€ 45ì´ˆ"])
    else:  # ê³ ê¸‰
        sets = random.randint(4, 5)
        reps = random.choice(["15~20íšŒ", "25íšŒ", "ì‹œê°„ ê¸°ì¤€ 1ë¶„"])

    return f"{sets}ì„¸íŠ¸ Ã— {reps}"

# 3. UI êµ¬ì„±
st.title("ğŸ‹ï¸ ì˜¤ëŠ˜ì˜ ìš´ë™ ë£¨í‹´ ì¶”ì²œ")

place = st.radio("ìš´ë™ ì¥ì†Œë¥¼ ì„ íƒí•˜ì„¸ìš”:", ("ë§¨ëª¸ ìš´ë™", "í—¬ìŠ¤ì¥ ìš´ë™"))
level = st.radio("ìš´ë™ ë‚œì´ë„ë¥¼ ì„ íƒí•˜ì„¸ìš”:", ("ì´ˆê¸‰", "ì¤‘ê¸‰", "ê³ ê¸‰"))

# ë‚ ì§œ ê¸°ë°˜ ì¶”ì²œ
today = datetime.date.today()
random.seed(today.toordinal())

# ìš´ë™ ë£¨í‹´ ì¶”ì²œ
exercise_names = exercises[place][level]
selected = random.sample(exercise_names, k=min(5, len(exercise_names)))

# 4. ê²°ê³¼ ì¶œë ¥
st.write(f"ğŸ“… ë‚ ì§œ: {today.strftime('%Y-%m-%d')}")
st.subheader(f"ğŸƒ ì˜¤ëŠ˜ì˜ ìš´ë™ ë£¨í‹´ ({place}, {level})")

for i, name in enumerate(selected, 1):
    plan = get_sets_reps(level, name)
    st.markdown(f"**{i}. {name}**  \n- ê¶Œì¥ ìš´ë™: {plan}")
